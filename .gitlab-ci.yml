variables:
    PLUGIN_NAME: 'OASwitchboardForOJS'

include:
  - project: 'documentacao-e-tarefas/modelosparaintegracaocontinua'
    ref: main
    file:
      - 'templates/groups/pkp_plugin.yml'
      - 'templates/groups/ojs_plugins_unit_tests_model.yml'
      - 'templates/groups/ojs_plugins_cypress_tests_model.yml'

.unit_test_template:
  before_script:
    - sed -i 's/api_key_secret = ""/api_key_secret = "$API_KEY_SECRET"/' /var/www/ojs/config.inc.php

.integration_tests_template:
  before_script:
    - $CYPRESS_OASPassword_decoded = echo $CYPRESS_OASPassword_encoded | base64 -d
    - sed -i 's/api_key_secret = ""/api_key_secret = "$API_KEY_SECRET"/' /var/www/ojs/config.inc.php